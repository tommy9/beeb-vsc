diff --git a/node_modules/jsbeeb/src/utils.js b/node_modules/jsbeeb/src/utils.js
index 430346a..d86a032 100644
--- a/node_modules/jsbeeb/src/utils.js
+++ b/node_modules/jsbeeb/src/utils.js
@@ -774,7 +774,7 @@ export function signExtend(val) {
     return val >= 128 ? val - 256 : val;
 }
 
-export function noop() {}
+export function noop() { }
 
 export function bench() {
     for (let j = 0; j < 10; ++j) {
@@ -840,30 +840,32 @@ function loadDataHttp(url) {
     });
 }
 
-async function loadDataNode(url) {
-    if (typeof readbuffer !== "undefined") {
-        // d8 shell
-        /*global readbuffer*/
-        return new Uint8Array(readbuffer(url));
-    } else if (typeof read !== "undefined") {
-        // SpiderMonkey shell
-        /*global read*/
-        return read(url, "binary");
-    } else {
-        // Node
-        const fs = await import("fs");
-        if (url[0] === "/") url = "." + url;
-        if (fs.existsSync("public/" + url)) return fs.readFileSync("public/" + url);
-        return fs.readFileSync(url);
-    }
+// SM: disable loadDataNode() so we dont have to patch import "fs"
+// async function loadDataNode(url) {
+//     if (typeof readbuffer !== "undefined") {
+//         // d8 shell
+//         /*global readbuffer*/
+//         return new Uint8Array(readbuffer(url));
+//     } else if (typeof read !== "undefined") {
+//         // SpiderMonkey shell
+//         /*global read*/
+//         return read(url, "binary");
+//     } else {
+//         // Node
+//         const fs = await import("fs");
+//         if (url[0] === "/") url = "." + url;
+//         if (fs.existsSync("public/" + url)) return fs.readFileSync("public/" + url);
+//         return fs.readFileSync(url);
+//     }
+// }
+
+let urlMap = [];
+export function setUrlMap(map) {
+    urlMap = map;
 }
 
 export function loadData(url) {
-    if (runningInNode) {
-        return loadDataNode(url);
-    } else {
-        return loadDataHttp(url);
-    }
+    return loadDataHttp(urlMap[url] ?? url);
 }
 
 export function readInt32(data, offset) {
